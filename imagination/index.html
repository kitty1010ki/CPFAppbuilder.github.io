<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>喚響</title>
    <link rel="stylesheet" href="fi.css">
    <link href="https://fonts.googleapis.com/css?family=PT+Sans" rel="stylesheet">
    <script src="opendata.js" type="text/javascript" data='data'></script>
  </head>
  <body onload="ShowTime()">

    <div class="container">
      <form>
        <select id="location-list"  class="selectLabel" onchange="changeLocation(this.selectedIndex)"></select>
        <select id="sector-list" class="selectLabel" ></select>
        <span id="showbox"></span>
        <br>
        <span class="spandate">Saturday , June 17</span>
      </form>
    </div>

    <div class="content">
        <div class="SO2">二氧化硫<p id="SO2"></p></div>

        <div class="OPAC">不透光率<p id="OPAC"></p></div>

        <div class="VEL">排放流率<p id="VEL"></p></div>

        <div class="NOX">氮氧化物<p id="NOX"></p></div>

        <div class="TEMP">溫度<p id="TEMP"></p></div>
    </div>

  </body>
  <script type="text/javascript">
  //select two
    var locations=['林口','南部','大林','興達','協和','通霄','台中','大潭'];
    var LocationSelect=document.getElementById("location-list");
    var inner="";
    for(var i=0;i<locations.length;i++){
      inner=inner+'<option value=i>'+locations[i]+'</option>';
    }
    LocationSelect.innerHTML=inner;
    var sectors=new Array();
    //林口
    sectors[0]=['1','2'];
    //南部
    sectors[1]=['1','2','3','4'];
    //大林
    sectors[2]=['1','2','5','6'];
    //興達
    sectors[3]=['1','2','3','4','5','6','7','8','9'];
    //協和
    sectors[4]=['1','2','3','4'];
    //通霄
    sectors[5]=['1','2','3','4','5','6'];
    //台中
    sectors[6]=['1','2','3','4','5','6','7','8','9','10'];
    //大潭
    sectors[7]=['1','2','3','4','5','6'];
    function changeLocation(index){
      var Sinner="";
      for(var i=0;i<sectors[index].length;i++){
        Sinner=Sinner+'<option value=i>'+sectors[index][i]+'</option>';
      }
      var sectorSelect=document.getElementById("sector-list");
      sectorSelect.innerHTML=Sinner;
    }
    changeLocation(document.getElementById("location-list").selectedIndex);


    //show time
    function ShowTime(){
　        var NowDate=new Date();
　        var h=NowDate.getHours();
　        var m=NowDate.getMinutes();
　        var s=NowDate.getSeconds();　
          m = checkTime(m);
          s = checkTime(s);
　        document.getElementById('showbox').innerHTML = h+':'+m+':'+s;
　        setTimeout('ShowTime()',1000);
    }
    function checkTime(i) {
    if (i < 10) {i = "0" + i};  // add zero in front of numbers < 10
    return i;

  //animationnum

  //test
  window.onload=function() {
        xmlFile="http://data.taipower.com.tw/opendata/apply/file/d004006/001.xml";
        xmlData=loadXMLFile(xmlFile);
        var SO2 = xmlData.getElementsByTagName("SO2二氧化硫").firstChild.nodeValue;
        document.getElementById('SO2').innerHTML +='SO2 = '+SO2+'<br>';
  }
}
  </script>


</html>
